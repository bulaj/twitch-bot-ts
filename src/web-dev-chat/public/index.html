<!DOCTYPE html>
<html>
<head>
    <title>Lokalny Czat Bota</title>
    <style>
        body { font-family: sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; }
        #messages { list-style-type: none; margin: 0; padding: 10px; border: 1px solid #ccc; flex-grow: 1; overflow-y: scroll; }
        #messages li { padding: 5px 10px; }
        #form { display: flex; padding: 10px; }
        input { border: 1px solid #ccc; padding: 10px; }
        #username { margin-right: 5px; }
        #input { flex-grow: 1; margin-right: 5px; }
    </style>
</head>
<body>
    <ul id="messages"></ul>
    <form id="form" action="">
        <input id="username" placeholder="Twój nick" value="dev_user" />
        <input id="input" autocomplete="off" placeholder="Wpisz wiadomość (np. !pogoda Londyn)" /><button>Wyślij</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const messages = document.getElementById('messages');
        const form = document.getElementById('form');
        const input = document.getElementById('input');
        const usernameInput = document.getElementById('username');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (input.value && usernameInput.value) {
                addMessage(usernameInput.value, input.value, '#1E90FF');
                socket.emit('chat-message', {
                    channel: '#localdev',
                    username: usernameInput.value,
                    message: input.value
                });
                input.value = '';
            }
        });

        socket.on('bot-message', function(data) {
            addMessage(data.username, data.message, '#FF4500');
        });

        function addMessage(user, msg, color = 'black') {
            const item = document.createElement('li');
            item.innerHTML = \`<strong style="color:\${color};">\${user}:</strong> \${msg}\`;
            messages.appendChild(item);
            messages.scrollTop = messages.scrollHeight;
        }
    </script>
</body>
</html>
